!function(t){t.fn.sLimit=function(a){var n={max:0,tip:"",rule:"asc"},e=t.extend({},n,a);return this.each(function(){var a=t(this),n=t(e.tip),r=a.val(),i=function(t){for(var a=0,n=/[\x00-\xff]+/,e=0;e<t.length;e++)a+=n.test(t.charAt(e))?1:2;return a=Math.ceil(a/2)},c=function(t,a){for(var n="",e=0,r=/[\x00-\xff]+/,i=0;i<t.length&&!((e+=r.test(t.charAt(i))?1:2)>2*a);i++)n+=t[i];return n},u=function(t){var r=0,u=i(t);n?(u<e.max&&("desc"==e.rule&&(r=e.max-u),"asc"==e.rule&&(r=u)),u>=e.max&&("desc"==e.rule&&(r=0),"asc"==e.rule&&(r=e.max),a.val(c(t,e.max))),n.text(r)):u>=e.max&&a.val(c(t,e.max))};a.bind("focus keyup change",function(){var a=t(this).val();u(a)}),u(r)}),this}}(window.jQuery||window.Zepto);