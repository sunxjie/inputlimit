!function(t){t.fn.sLimit=function(a){var n={max:0,tip:"",rule:"auto"},e=t.extend({},n,a);return this.each(function(){var a=t(this),n=t(e.tip),r=a.val(),i=function(t){for(var a=0,n=/[\x00-\xff]+/,e=0;e<t.length;e++)a+=n.test(t.charAt(e))?1:2;return a=Math.ceil(a/2)},u=function(t,a){for(var n="",e=0,r=/[\x00-\xff]+/,i=0;i<t.length&&!((e+=r.test(t.charAt(i))?1:2)>2*a);i++)n+=t[i];return n},c=function(t){var r=0,c=i(t);n?(c<e.max&&("desc"==e.rule&&(r=e.max-c),"asc"==e.rule&&(r=c)),c>=e.max&&("desc"==e.rule&&(r=0),"asc"==e.rule&&(r=e.max),a.val(u(t,e.max))),n.text(r)):c>=e.max&&a.val(u(t,e.max))};a.bind("focus keyup change",function(){var a=t(this).val();c(a)}),c(r)}),this}}(window.jQuery||window.Zepto);