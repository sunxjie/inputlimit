!function(t){t.fn.sLimit=function(e){var a={max:0,tip:"",rule:"asc"},i=t.extend({},a,e);return this.each(function(){var e=t(this),a=t.trim(e.val()),n=t(i.tip),r=/[\x00-\xff]+/,c={init:function(t){var a=0,r=this.getTextlen(t);switch(i.rule){case"desc":r<i.max?a=i.max-r:(a=0,e.val(this.getTextmax(t,i.max)));break;case"asc":r<i.max?a=r:(a=i.max,e.val(this.getTextmax(t,i.max)))}n&&n.text(a)},getTextlen:function(t){for(var e=0,a=0;a<t.length;a++)e+=r.test(t.charAt(a))?1:2;return e=Math.ceil(e/2)},getTextmax:function(t,e){for(var a=0,i="",n=0;n<t.length&&!((a+=r.test(t.charAt(n))?1:2)>2*e);n++)i+=t[n];return i}};e.bind("focus keyup change",function(){var e=t(this).val();c.init(e)}),c.init(a)}),this}}(window.jQuery||window.Zepto);