/**
 * 输入框文字长度限制
 * @author sunxjie
 * @date 2017.08.29
 * @github https://github.com/sunxjie/inputlimit
 */

(function(a){a.fn.inputlimit=function(b){var d={max:0,tip:"",rule:"asc"};var c=a.extend({},d,b);this.each(function(){var i=a(this);var g=a.trim(i.val());var f=a(c.tip);var e=/[\x00-\xff]+/;var h={init:function(l){var k=0;var j=this.getTextlen(l);switch(c.rule){case"desc":if(j<c.max){k=c.max-j}else{k=0;i.val(this.getTextmax(l,c.max))}break;case"asc":if(j<c.max){k=j}else{k=c.max;i.val(this.getTextmax(l,c.max))}break}if(f){f.text(k)}},getTextlen:function(l){var j=0;for(var k=0;k<l.length;k++){j+=!e.test(l.charAt(k))?2:1}j=Math.ceil(j/2);return j},getTextmax:function(n,j){var k=0,l="";for(var m=0;m<n.length;m++){k+=!e.test(n.charAt(m))?2:1;if(k>j*2){break}l+=n[m]}return l}};i.bind("focus keyup change",function(){var j=a(this).val();h.init(j)});h.init(g)});return this}})(window.jQuery||window.Zepto);